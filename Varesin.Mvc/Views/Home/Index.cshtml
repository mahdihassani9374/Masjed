@using Varesin.Mvc.Models.SlideShow
@using Varesin.Mvc.Models.News
@using Varesin.Mvc.Models.Post
@using DNTPersianUtils.Core
@using Varesin.Mvc.Models.Event
@{
    ViewData["Title"] = "وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین علیه السلام";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
    var slideShows = (List<SlideShowViewModel>)ViewBag.SlideShows;
    var nowEvents = (List<string>)ViewBag.NowEvents;
    var lastMahalNews = (List<NewsViewModel>)ViewBag.LastMahalNews;
    var lastNews = (List<NewsViewModel>)ViewBag.LastNews;
    var lastPosts = (List<PostViewModel>)ViewBag.LastPosts;
    var lastEvents = (List<EventViewModel>)ViewBag.LastEvents;
}

<!-- header and slider  -->

<div id="bootstrap-touch-slider" class="carousel bs-slider fade  control-round indicators-line" data-ride="carousel"
     data-pause="hover" data-interval="4000">

    <header class="header">
        <div class="container">
            <div class="">
                <div class="col-md-6 col-sm-6 col-xs-12 text-left">
                    <img src="./img/bsml-txt.png" class="img-responsive" alt="وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین (علیه السلام)" />
                </div>
                <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="text-right header-txt">به سایت وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین(علیه السلام) خوش آمدید </div>
                </div>
            </div>
        </div>
    </header>
    <!-- navigation -->
    <nav class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>               
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li><a href="/"><i class="pe-7s-home"></i> صفحه اصلی</a></li>
                    <li><a href="/Home/ContactUs"><i class="pe-7s-call"></i> تماس با ما </a></li>
                    <li><a href="/Home/AboutUs"><i class="pe-7s-user"></i> درباره ما</a></li>
                    <li><a href="/News"><i class="pe-7s-calculator"></i> اخبار سایت</a></li>
                    <li><a href="/Post"><i class="pe-7s-calculator"></i> پست ها</a></li>
                    <li><a href="/Event"><i class="pe-7s-file"></i> گزارشات</a></li>
                    <li><a href="/FinancialSupport"><i class="pe-7s-credit" aria-hidden="true"></i> مساعدت مالی</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">                   
                    <li><a asp-action="Login" asp-controller="Account"><span class="pe-7s-back"></span> ورود</a></li>
                </ul>
            </div>
        </div>
    </nav>

    @if (slideShows.Count != 0)
    {
        <!-- Indicators -->
        <ol class="carousel-indicators">
            @for (int i = 0; i < slideShows.Count; i++)
            {
                <li data-target="#bootstrap-touch-slider" data-slide-to="@(i)" class="@(i==0 ? "active" : "")"></li>
            }


        </ol>

        <!-- Wrapper For Slides -->
        <div class="carousel-inner" role="listbox">
            @for (int i = 0; i < slideShows.Count; i++)
            {
                <div class="@(i==0 ? "item active" : "item")">
                    <!-- Slide Background -->
                    <img src="~/Files/SlideShow/@(slideShows[i].FileName)" alt="وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین(علیه السلام)" class="slide-image" />
                    <div class="bs-slider-overlay"></div>
                    <!-- Slide Text Layer -->
                    <div class="slide-text slide_style_center">
                        <h1 data-animation="animated flipInX">@(slideShows[i].Title) </h1>
                        <p data-animation="animated lightSpeedIn">
                            @(slideShows[i].Description)
                        </p>
                        @if (string.IsNullOrEmpty(slideShows[i].Link))
                        {
                            <a asp-action="AboutUs" asp-controller="Home" target="_blank" class="btn btn-default" data-animation="animated fadeInUp">
                                درباره ما
                            </a>
                        }
                        else
                        {
                            <a href="@(slideShows[i].Link)" target="_blank" class="btn btn-default" data-animation="animated fadeInUp">
                                مشاهده جزئیات
                            </a>
                        }

                        <a asp-action="ContactUs" asp-controller="Home" target="_blank" class="btn btn-primary" data-animation="animated fadeInDown">
                            تماس با
                            ما
                        </a>
                    </div>
                </div>
            }
        </div>

        <!-- Left Control -->
        <a class="left carousel-control" href="#bootstrap-touch-slider" role="button" data-slide="prev">
            <span class="fa fa-angle-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>

        <!-- Right Control -->
        <a class="right carousel-control" href="#bootstrap-touch-slider" role="button" data-slide="next">
            <span class="fa fa-angle-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    }

    else
    {
        <style>
            .header {
                position: relative;
                background-color: #3a93b0 !important;
            }

            .navbar {
                position: static;
                background-color: #333 !important;
            }
        </style>
    }
</div>

<!-- service -->

<div class="services">
    <h1 class="services__title"> وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین(علیه السلام)  </h1>
    <div class="services__desc">خدماتی که وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین(علیه السلام)  ارائه میدهد </div>
    <div class="services__item">
        <div>
            <i class="icon flaticon-quran-rehal"></i>
            <div class="services__item__title">آموزش قرآن</div>
        </div>
        <div>
            <i class="icon flaticon-heart-1"></i>
            <div class="services__item__title">خدمات خیریه و کمک</div>
        </div>
        <div>
            <i class="icon flaticon-mosque"></i>
            <div class="services__item__title">ساخت مسجد</div>
        </div>
        <div>
            <i class="icon flaticon-social-care"></i>
            <div class="services__item__title">کمک به فقرا</div>
        </div>
    </div>
</div>

<div class="project">
    <div class="container">
        <div class="row">
            <div class="project__title">اطلاع رسانی های وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین (علیه السلام)</div>
            <div class="project__arrow">
                <i data-role="slick-right" class="fa fa-arrow-circle-right"></i>
                <i data-role="slick-left" class="fa fa-arrow-circle-left"></i>
            </div>
            <div class="project__slick">
                <div class="col-xs-12">
                    <div class="project__slick__item">
                        <div class="project__slick__item__img">
                            <img src="./img/p1.jpg" class="img-responsive" alt="وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین (علیه السلام)" />
                        </div>
                        <div class="project__slick__item__title">
                            عنوان پروژه مورد نظر
                        </div>
                        <div class="project__slick__item__desc">
                            <div class="row">
                                <div class="col-xs-12 text-left">
                                    <span>برآورد هزینه : 100,000 تومان</span>
                                    <i class="pe-7s-home"></i>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6 text-left">
                                    <span>محل پروژه : اصفهان</span>
                                    <i class="pe-7s-home"></i>
                                </div>
                                <div class="col-xs-6 text-right">
                                    <span>زمان : 12 اردیبهشت 1399</span>
                                    <i class="pe-7s-home"></i>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <a class="btn btn-primary">مشاهده جزئیات پروژه</a>
                        </div>
                    </div>
                </div>                
            </div>
        </div>
        <div class="row text-center" style="margin-top: 30px;">
            <p style="font-weight: 600;">برای مشاهده همه خبر ها بر روی لینک زیر کلیک کنید </p>
            <a href="#" style="border-radius: 15px;" class="btn btn-primary">مشاهده همه خبر ها</a>
        </div>
    </div>
</div>

@*<div class="project">
    <div class="container">
        <div class="row">
            <div class=""></div>
            @foreach (var item in nowEvents)
            {
                <div class="project__title">@item</div>
            }

        </div>
    </div>
</div>*@

<div class="detail">
    <div class="container">
        <div class="row">
            <ul class="nav nav-tabs">
                <li class="active"><a data-toggle="tab" href="#home">اخبار محله</a></li>
                <li><a data-toggle="tab" href="#menu1">اخبار سیاسی و فرهنگی و ...</a></li>
                <li><a data-toggle="tab" href="#menu2">آخرین پست ها </a></li>
            </ul>

            <div class="tab-content">
                <div id="home" class="tab-pane fade in active">
                    @if (lastMahalNews.Count == 0)
                    {
                        <div class="alert alert-danger">خبری وجود ندارد</div>
                    }
                    else
                    {
                        foreach (var item in lastMahalNews)
                        {
                            <div class="col-md-4 col-xs-6 col-sm-6">
                                <div class="detail__post__item detail__post__item-box">
                                    <div class="row">
                                        <div class="col-xs-4">
                                            <img src="~/Files/News/@(item.PrimaryPicture)" alt="@(item.Title) - وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین (علیه السلام)" class="img-thumbnail img-responsive" />
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="detail__post__item__title">
                                                @(item.Title?.ToPersianNumbers())
                                            </div>
                                            <div class="detail__post__item__desc">
                                                @(item.CreateDate.ToPersianDateTextify())
                                            </div>
                                            <div class="text-left">
                                                <a asp-action="Detail" asp-controller="News" asp-route-id="@(item.Id)">ادامه مطلب >></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
                <div id="menu1" class="tab-pane fade">
                    @if (lastNews.Count == 0)
                    {
                    <div class="alert alert-danger">خبری وجود ندارد</div>
                    }
                    else
                    {
                        foreach (var item in lastNews)
                        {

                            <div class="col-md-4 col-xs-6 col-sm-6">
                                <div class="detail__post__item detail__post__item-box">
                                    <div class="row">
                                        <div class="col-xs-4">
                                            <img src="~/Files/News/@(item.PrimaryPicture)" alt="@(item.Title) - وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین (علیه السلام)" class="img-thumbnail img-responsive" />
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="detail__post__item__title">
                                                @(item.Title?.ToPersianNumbers())
                                            </div>
                                            <div class="detail__post__item__desc">
                                                @(item.CreateDate.ToPersianDateTextify())
                                            </div>
                                            <div class="text-left">
                                                <a asp-action="Detail" asp-controller="News" asp-route-id="@(item.Id)">ادامه مطلب >></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
                <div id="menu2" class="tab-pane fade">
                    @if (lastPosts.Count == 0)
                    {
                    <div class="alert alert-danger">پستی وجود ندارد</div>
                    }
                    else
                    {
                        foreach (var item in lastPosts)
                        {

                            <div class="col-md-4 col-xs-6 col-sm-6">
                                <div class="detail__post__item detail__post__item-box">
                                    <div class="row">
                                        <div class="col-xs-4">
                                            <img src="~/Files/Post/@(item.PrimaryPicture)" alt="@(item.Title) - وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین (علیه السلام)" class="img-thumbnail img-responsive" />
                                        </div>
                                        <div class="col-xs-8">
                                            <div class="detail__post__item__title">
                                                @(item.Title?.ToPersianNumbers())
                                            </div>
                                            <div class="detail__post__item__desc">
                                                @(item.CreateDate.ToPersianDateTextify())
                                            </div>
                                            <div class="text-left">
                                                <a asp-action="Detail" asp-controller="Post" asp-route-id="@(item.Id)">ادامه مطلب >></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<div class="report" style="background-color:#e3e3e3">
    <div class="container">
        <div class="report__title">
            گزارشات تصویری وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین(علیه السلام) 
            <a asp-action="Index" asp-controller="Event" style="float: left;">مشاهده همه گزارشات</a>
        </div>
        <div class="row">

        </div>
        @if (lastEvents.Count == 0)
        {
            <div class="alert alert-danger">گزارشی وجود ندارد</div>
        }
        else
        {
            foreach (var item in lastEvents)
            {
                <div class="col-md-3 col-sm-4 col-xs-6">
                    <a asp-action="Detail" asp-controller="Event" asp-route-id="@(item.Id)">
                        <div class="report__item">
                            <img src="~/Files/Event/@(item.PrimaryPicture)" alt="@(item.Title) - وصی - پایگاه اطلاع رسانی مسجد امیرالمومنین (علیه السلام)" />
                            <div class="report__item__title">@(item.Title?.ToPersianNumbers())</div>
                        </div>
                    </a>
                </div>
            }
        }

    </div>
</div>